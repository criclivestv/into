<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shaka Player Link Generator</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.6/controls.min.css">
<style>
body{margin:0;padding:0;font-family:Arial,sans-serif;background:#111;color:#fff;}
.container{max-width:900px;margin:20px auto;padding:14px;}
input, select{padding:6px 8px;margin:4px;border-radius:6px;border:1px solid #333;background:#222;color:#fff;}
button{padding:6px 10px;margin:4px;border:none;border-radius:6px;background:#1a73e8;color:#fff;cursor:pointer;}
button.secondary{background:#333;}
textarea{width:100%;min-height:60px;margin-top:6px;padding:8px;border-radius:6px;background:#222;color:#fff;border:1px solid #333;}
</style>
</head>
<body>
<div class="container">
<h1>Shaka Player Link / Embed Generator</h1>

<label>Video DASH/MPD URL:</label><br>
<input type="url" id="url" placeholder="https://example.com/stream.mpd" style="width:100%"><br>

<label>Logo URL (optional):</label><br>
<input type="url" id="logo" placeholder="https://example.com/logo.png" style="width:60%">
<select id="logoPos">
<option value="top-left">Top-left</option>
<option value="top-right">Top-right</option>
<option value="bottom-left">Bottom-left</option>
<option value="bottom-right">Bottom-right</option>
<option value="center">Center</option>
</select>
<input type="number" id="logoSize" placeholder="Width px" value="120" style="width:80px">
<input type="range" id="logoOpacity" min="0" max="100" value="85">
<span id="logoOpVal">85%</span>
<br>

<label>Watermark Text (optional):</label><br>
<input type="text" id="wmText" placeholder="Watermark"><br>

<button id="genLink">Generate Player Link</button>
<button id="genEmbed" class="secondary">Generate Embed Code</button>
<textarea id="output" placeholder="Generated link or embed code"></textarea>
</div>

<script>
const urlInp=document.getElementById('url');
const logoInp=document.getElementById('logo');
const logoPos=document.getElementById('logoPos');
const logoSize=document.getElementById('logoSize');
const logoOpacity=document.getElementById('logoOpacity');
const logoOpVal=document.getElementById('logoOpVal');
const wmText=document.getElementById('wmText');
const output=document.getElementById('output');

logoOpacity.addEventListener('input',()=>{logoOpVal.textContent=logoOpacity.value+'%';});

document.getElementById('genLink').addEventListener('click',()=>{
    if(!urlInp.value){alert('Please enter video URL'); return;}
    let u=new URL('player.html',location.href);
    u.searchParams.set('url',urlInp.value);
    if(logoInp.value) u.searchParams.set('logo',logoInp.value);
    if(logoPos.value) u.searchParams.set('logoPos',logoPos.value);
    if(logoSize.value) u.searchParams.set('logoSize',logoSize.value);
    if(logoOpacity.value) u.searchParams.set('logoOpacity',logoOpacity.value);
    if(wmText.value) u.searchParams.set('wmText',encodeURIComponent(wmText.value));
    output.value=u.toString();
});

document.getElementById('genEmbed').addEventListener('click',()=>{
    if(!urlInp.value){alert('Please enter video URL'); return;}
    let u=new URL('player.html',location.href);
    u.searchParams.set('url',urlInp.value);
    if(logoInp.value) u.searchParams.set('logo',logoInp.value);
    if(logoPos.value) u.searchParams.set('logoPos',logoPos.value);
    if(logoSize.value) u.searchParams.set('logoSize',logoSize.value);
    if(logoOpacity.value) u.searchParams.set('logoOpacity',logoOpacity.value);
    if(wmText.value) u.searchParams.set('wmText',encodeURIComponent(wmText.value));
    output.value=`<iframe src="${u.toString()}" width="800" height="450" frameborder="0" allowfullscreen allow="autoplay; fullscreen; picture-in-picture"></iframe>`;
});
</script>
</body>
</html>
